<!DOCTYPE html><html lang="pt-BR" class="dark"> <head><meta charset="UTF-8"><meta name="description" content="Guia prático para dominar containerização e orquestração. Do desenvolvimento local à produção em escala."><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><meta name="generator" content="Astro v5.13.10"><!-- Primary Meta Tags --><title>DevOps Moderno: Docker e Kubernetes na Prática para Desenvolvedores</title><meta name="title" content="DevOps Moderno: Docker e Kubernetes na Prática para Desenvolvedores"><meta name="description" content="Guia prático para dominar containerização e orquestração. Do desenvolvimento local à produção em escala."><link rel="canonical" href="https://coders.ia.br/blog/devops-docker-kubernetes/"><!-- Open Graph / Facebook --><meta property="og:type" content="article"><meta property="og:url" content="https://coders.ia.br/blog/devops-docker-kubernetes/"><meta property="og:title" content="DevOps Moderno: Docker e Kubernetes na Prática para Desenvolvedores"><meta property="og:description" content="Guia prático para dominar containerização e orquestração. Do desenvolvimento local à produção em escala."><meta property="og:site_name" content="Coders.ia.br"><!-- Twitter --><meta property="twitter:card" content="summary_large_image"><meta property="twitter:url" content="https://coders.ia.br/blog/devops-docker-kubernetes/"><meta property="twitter:title" content="DevOps Moderno: Docker e Kubernetes na Prática para Desenvolvedores"><meta property="twitter:description" content="Guia prático para dominar containerização e orquestração. Do desenvolvimento local à produção em escala."><!-- RSS Feed --><link rel="alternate" type="application/rss+xml" title="Coders.ia.br RSS Feed" href="/rss.xml"><!-- Fonts --><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet"><link rel="stylesheet" href="/_astro/_slug_.r9NqVzhe.css"></head> <body class="min-h-screen bg-slate-900 text-slate-100 font-['Inter',sans-serif] antialiased"> <div class="flex flex-col min-h-screen"> <!-- Header --> <header class="sticky top-0 z-50 w-full border-b border-slate-800 bg-slate-900/95 backdrop-blur supports-[backdrop-filter]:bg-slate-900/60"> <div class="container mx-auto flex h-16 items-center justify-between px-4"> <!-- Logo --> <a href="/" class="flex items-center space-x-2"> <img src="/glider-white.svg" alt="Coders.ia.br Logo" class="w-8 h-8"> <span class="text-xl font-bold text-white font-mono uppercase">CODERS.IA.BR</span> </a> <!-- Centered Navigation --> <nav class="hidden md:flex items-center space-x-8"> <a href="/categorias" class="text-slate-300 hover:text-white transition-colors duration-200">Categorias</a> <a href="/sobre" class="text-slate-300 hover:text-white transition-colors duration-200">Sobre</a> </nav> <!-- Social Icons --> <div class="hidden md:flex items-center space-x-4"> <a href="https://linkedin.com/company/codersiadev" target="_blank" rel="noopener noreferrer" class="text-slate-400 hover:text-accent-400 transition-colors duration-200"> <svg xmlns="http://www.w3.org/2000/svg" stroke-width="2" width="24" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" fill="none" viewBox="0 0 24 24" class="lucide lucide-linkedin w-5 h-5">  <path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path> <rect width="4" height="12" x="2" y="9"></rect> <circle cx="4" cy="4" r="2"></circle>  </svg> </a> <a href="https://github.com/codersiadev" target="_blank" rel="noopener noreferrer" class="text-slate-400 hover:text-accent-400 transition-colors duration-200"> <svg xmlns="http://www.w3.org/2000/svg" stroke-width="2" width="24" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" fill="none" viewBox="0 0 24 24" class="lucide lucide-github w-5 h-5">  <path d="M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"></path> <path d="M9 18c-4.51 2-5-2-7-2"></path>  </svg> </a> </div> <!-- Mobile menu button --> <button id="mobile-menu-button" class="md:hidden text-slate-300 hover:text-white"> <svg xmlns="http://www.w3.org/2000/svg" stroke-width="2" width="24" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" fill="none" viewBox="0 0 24 24" class="lucide lucide-menu w-6 h-6">  <path d="M4 5h16"></path> <path d="M4 12h16"></path> <path d="M4 19h16"></path>  </svg> </button> </div> <!-- Mobile menu --> <div id="mobile-menu" class="hidden md:hidden border-t border-slate-800 bg-slate-900"> <div class="container mx-auto px-4 py-4 space-y-2"> <a href="/categorias" class="block py-2 text-slate-300 hover:text-white transition-colors duration-200">Categorias</a> <a href="/sobre" class="block py-2 text-slate-300 hover:text-white transition-colors duration-200">Sobre</a> <div class="flex items-center space-x-4 pt-4 border-t border-slate-700"> <a href="https://linkedin.com/company/codersiadev" target="_blank" rel="noopener noreferrer" class="text-slate-400 hover:text-accent-400 transition-colors duration-200"> <svg xmlns="http://www.w3.org/2000/svg" stroke-width="2" width="24" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" fill="none" viewBox="0 0 24 24" class="lucide lucide-linkedin w-5 h-5">  <path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path> <rect width="4" height="12" x="2" y="9"></rect> <circle cx="4" cy="4" r="2"></circle>  </svg> </a> <a href="https://github.com/codersiadev" target="_blank" rel="noopener noreferrer" class="text-slate-400 hover:text-accent-400 transition-colors duration-200"> <svg xmlns="http://www.w3.org/2000/svg" stroke-width="2" width="24" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" fill="none" viewBox="0 0 24 24" class="lucide lucide-github w-5 h-5">  <path d="M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"></path> <path d="M9 18c-4.51 2-5-2-7-2"></path>  </svg> </a> </div> </div> </div> </header> <!-- Main Content --> <main class="flex-1">  <article class="container mx-auto px-4 py-8 max-w-4xl"> <!-- Breadcrumb --> <nav class="mb-8 text-sm"> <ol class="flex items-center space-x-2 text-slate-400"> <li><a href="/" class="hover:text-accent-400 transition-colors">Home</a></li> <li><span class="mx-2">/</span></li> <li><a href="/categorias/devops" class="hover:text-accent-400 transition-colors">DevOps</a></li> <li><span class="mx-2">/</span></li> <li class="text-slate-300 truncate">DevOps Moderno: Docker e Kubernetes na Prática para Desenvolvedores</li> </ol> </nav> <!-- Post Header --> <header class="mb-12 text-center"> <div class="mb-4"> <span class="inline-block px-3 py-1 text-xs font-medium text-accent-300 bg-accent-900/30 rounded-full border border-accent-800"> DevOps </span> </div> <h1 class="text-4xl md:text-5xl font-bold text-white mb-6 leading-tight"> DevOps Moderno: Docker e Kubernetes na Prática para Desenvolvedores </h1> <p class="text-xl text-slate-300 mb-8 max-w-3xl mx-auto leading-relaxed"> Guia prático para dominar containerização e orquestração. Do desenvolvimento local à produção em escala. </p> <div class="flex items-center justify-center space-x-6 text-sm text-slate-400"> <div class="flex items-center space-x-2"> <svg xmlns="http://www.w3.org/2000/svg" stroke-width="2" width="24" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" fill="none" viewBox="0 0 24 24" class="lucide lucide-user w-4 h-4">  <path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"></path> <circle cx="12" cy="7" r="4"></circle>  </svg> <span>Coders.ia.br</span> </div> <div class="flex items-center space-x-2"> <svg xmlns="http://www.w3.org/2000/svg" stroke-width="2" width="24" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" fill="none" viewBox="0 0 24 24" class="lucide lucide-calendar w-4 h-4">  <path d="M8 2v4"></path> <path d="M16 2v4"></path> <rect width="18" height="18" x="3" y="4" rx="2"></rect> <path d="M3 10h18"></path>  </svg> <time datetime="2024-09-18T00:00:00.000Z">17 de setembro de 2024</time> </div> </div> </header> <!-- Post Content --> <div class="prose prose-lg prose-invert max-w-none mx-auto">  <p>Se você ainda está fazendo deploy manualmente ou lutando com “funciona na minha máquina”, este artigo vai mudar sua vida profissional. Vamos explorar Docker e Kubernetes de forma prática, do zero à produção.</p>
<h2 id="por-que-devops-importa-mais-do-que-nunca">Por que DevOps Importa Mais do que Nunca?</h2>
<p>Imagine entregar features em <strong>minutos</strong>, não dias. Ter <strong>zero downtime</strong> em deploys. <strong>Escalar automaticamente</strong> conforme a demanda. Isso não é sonho - é DevOps moderno.</p>
<h3 id="o-problema-clássico">O Problema Clássico:</h3>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#6A737D"># O desenvolvedor:</span></span>
<span class="line"><span style="color:#B392F0">"Funciona perfeitamente na minha máquina!"</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># Em staging:</span></span>
<span class="line"><span style="color:#B392F0">Error:</span><span style="color:#9ECBFF"> Node.js</span><span style="color:#9ECBFF"> version</span><span style="color:#9ECBFF"> mismatch</span></span>
<span class="line"><span style="color:#B392F0">Error:</span><span style="color:#9ECBFF"> Missing</span><span style="color:#9ECBFF"> environment</span><span style="color:#9ECBFF"> variables</span></span>
<span class="line"><span style="color:#B392F0">Error:</span><span style="color:#9ECBFF"> Database</span><span style="color:#9ECBFF"> connection</span><span style="color:#9ECBFF"> failed</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># Em produção:</span></span>
<span class="line"><span style="color:#B392F0">Error:</span><span style="color:#9ECBFF"> Everything</span><span style="color:#9ECBFF"> is</span><span style="color:#9ECBFF"> on</span><span style="color:#9ECBFF"> fire</span><span style="color:#9ECBFF"> 🔥</span></span></code></pre>
<h3 id="a-solução">A Solução:</h3>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="dockerfile"><code><span class="line"><span style="color:#6A737D"># Dockerfile - ambiente reproduzível</span></span>
<span class="line"><span style="color:#F97583">FROM</span><span style="color:#E1E4E8"> node:18-alpine</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">WORKDIR</span><span style="color:#E1E4E8"> /app</span></span>
<span class="line"><span style="color:#F97583">COPY</span><span style="color:#E1E4E8"> package*.json ./</span></span>
<span class="line"><span style="color:#F97583">RUN</span><span style="color:#E1E4E8"> npm ci --only=production</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">COPY</span><span style="color:#E1E4E8"> . .</span></span>
<span class="line"><span style="color:#F97583">EXPOSE</span><span style="color:#E1E4E8"> 3000</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">CMD</span><span style="color:#E1E4E8"> [</span><span style="color:#9ECBFF">"npm"</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">"start"</span><span style="color:#E1E4E8">]</span></span></code></pre>
<h2 id="docker-containerização-na-prática">Docker: Containerização na Prática</h2>
<h3 id="1-conceitos-fundamentais">1. <strong>Conceitos Fundamentais</strong></h3>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="yaml"><code><span class="line"><span style="color:#6A737D"># docker-compose.yml - Stack completa</span></span>
<span class="line"><span style="color:#85E89D">version</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">'3.8'</span></span>
<span class="line"></span>
<span class="line"><span style="color:#85E89D">services</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#6A737D">  # Aplicação frontend</span></span>
<span class="line"><span style="color:#85E89D">  frontend</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">    build</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">./frontend</span></span>
<span class="line"><span style="color:#85E89D">    ports</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">      - </span><span style="color:#9ECBFF">"3000:3000"</span></span>
<span class="line"><span style="color:#85E89D">    environment</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">      - </span><span style="color:#9ECBFF">REACT_APP_API_URL=http://localhost:5000</span></span>
<span class="line"><span style="color:#85E89D">    depends_on</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">      - </span><span style="color:#9ECBFF">backend</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">  # API backend</span></span>
<span class="line"><span style="color:#85E89D">  backend</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">    build</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">./backend</span></span>
<span class="line"><span style="color:#85E89D">    ports</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">      - </span><span style="color:#9ECBFF">"5000:5000"</span></span>
<span class="line"><span style="color:#85E89D">    environment</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">      - </span><span style="color:#9ECBFF">DATABASE_URL=postgresql://user:pass@postgres:5432/app</span></span>
<span class="line"><span style="color:#E1E4E8">      - </span><span style="color:#9ECBFF">JWT_SECRET=your-secret-key</span></span>
<span class="line"><span style="color:#85E89D">    depends_on</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">      - </span><span style="color:#9ECBFF">postgres</span></span>
<span class="line"><span style="color:#E1E4E8">      - </span><span style="color:#9ECBFF">redis</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">  # Banco de dados</span></span>
<span class="line"><span style="color:#85E89D">  postgres</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">    image</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">postgres:15</span></span>
<span class="line"><span style="color:#85E89D">    environment</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">      - </span><span style="color:#9ECBFF">POSTGRES_DB=app</span></span>
<span class="line"><span style="color:#E1E4E8">      - </span><span style="color:#9ECBFF">POSTGRES_USER=user</span></span>
<span class="line"><span style="color:#E1E4E8">      - </span><span style="color:#9ECBFF">POSTGRES_PASSWORD=pass</span></span>
<span class="line"><span style="color:#85E89D">    volumes</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">      - </span><span style="color:#9ECBFF">postgres_data:/var/lib/postgresql/data</span></span>
<span class="line"><span style="color:#85E89D">    ports</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">      - </span><span style="color:#9ECBFF">"5432:5432"</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">  # Cache</span></span>
<span class="line"><span style="color:#85E89D">  redis</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">    image</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">redis:7-alpine</span></span>
<span class="line"><span style="color:#85E89D">    ports</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">      - </span><span style="color:#9ECBFF">"6379:6379"</span></span>
<span class="line"></span>
<span class="line"><span style="color:#85E89D">volumes</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">  postgres_data</span><span style="color:#E1E4E8">:</span></span></code></pre>
<h3 id="2-dockerfiles-otimizados">2. <strong>Dockerfiles Otimizados</strong></h3>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="dockerfile"><code><span class="line"><span style="color:#6A737D"># Multi-stage build para Next.js</span></span>
<span class="line"><span style="color:#F97583">FROM</span><span style="color:#E1E4E8"> node:18-alpine </span><span style="color:#F97583">AS</span><span style="color:#E1E4E8"> base</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># Dependências</span></span>
<span class="line"><span style="color:#F97583">FROM</span><span style="color:#E1E4E8"> base </span><span style="color:#F97583">AS</span><span style="color:#E1E4E8"> deps</span></span>
<span class="line"><span style="color:#F97583">WORKDIR</span><span style="color:#E1E4E8"> /app</span></span>
<span class="line"><span style="color:#F97583">COPY</span><span style="color:#E1E4E8"> package*.json ./</span></span>
<span class="line"><span style="color:#F97583">RUN</span><span style="color:#E1E4E8"> npm ci</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># Build</span></span>
<span class="line"><span style="color:#F97583">FROM</span><span style="color:#E1E4E8"> base </span><span style="color:#F97583">AS</span><span style="color:#E1E4E8"> builder</span></span>
<span class="line"><span style="color:#F97583">WORKDIR</span><span style="color:#E1E4E8"> /app</span></span>
<span class="line"><span style="color:#F97583">COPY</span><span style="color:#E1E4E8"> --from=deps /app/node_modules ./node_modules</span></span>
<span class="line"><span style="color:#F97583">COPY</span><span style="color:#E1E4E8"> . .</span></span>
<span class="line"><span style="color:#F97583">RUN</span><span style="color:#E1E4E8"> npm run build</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># Produção</span></span>
<span class="line"><span style="color:#F97583">FROM</span><span style="color:#E1E4E8"> base </span><span style="color:#F97583">AS</span><span style="color:#E1E4E8"> runner</span></span>
<span class="line"><span style="color:#F97583">WORKDIR</span><span style="color:#E1E4E8"> /app</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">ENV</span><span style="color:#E1E4E8"> NODE_ENV production</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">RUN</span><span style="color:#E1E4E8"> addgroup --system --gid 1001 nodejs</span></span>
<span class="line"><span style="color:#F97583">RUN</span><span style="color:#E1E4E8"> adduser --system --uid 1001 nextjs</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">COPY</span><span style="color:#E1E4E8"> --from=builder /app/public ./public</span></span>
<span class="line"><span style="color:#F97583">COPY</span><span style="color:#E1E4E8"> --from=builder --chown=nextjs:nodejs /app/.next/standalone ./</span></span>
<span class="line"><span style="color:#F97583">COPY</span><span style="color:#E1E4E8"> --from=builder --chown=nextjs:nodejs /app/.next/static ./.next/static</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">USER</span><span style="color:#E1E4E8"> nextjs</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">EXPOSE</span><span style="color:#E1E4E8"> 3000</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">ENV</span><span style="color:#E1E4E8"> PORT 3000</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">CMD</span><span style="color:#E1E4E8"> [</span><span style="color:#9ECBFF">"node"</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">"server.js"</span><span style="color:#E1E4E8">]</span></span></code></pre>
<h3 id="3-docker-para-desenvolvimento">3. <strong>Docker para Desenvolvimento</strong></h3>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#6A737D"># Makefile para automação</span></span>
<span class="line"><span style="color:#B392F0">.PHONY:</span><span style="color:#9ECBFF"> build</span><span style="color:#9ECBFF"> run</span><span style="color:#9ECBFF"> stop</span><span style="color:#9ECBFF"> clean</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># Build da aplicação</span></span>
<span class="line"><span style="color:#B392F0">build:</span></span>
<span class="line"><span style="color:#B392F0">	docker-compose</span><span style="color:#9ECBFF"> build</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># Rodar ambiente completo</span></span>
<span class="line"><span style="color:#B392F0">run:</span></span>
<span class="line"><span style="color:#B392F0">	docker-compose</span><span style="color:#9ECBFF"> up</span><span style="color:#79B8FF"> -d</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># Logs em tempo real</span></span>
<span class="line"><span style="color:#B392F0">logs:</span></span>
<span class="line"><span style="color:#B392F0">	docker-compose</span><span style="color:#9ECBFF"> logs</span><span style="color:#79B8FF"> -f</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># Rodar testes</span></span>
<span class="line"><span style="color:#79B8FF">test</span><span style="color:#9ECBFF">:</span></span>
<span class="line"><span style="color:#B392F0">	docker-compose</span><span style="color:#9ECBFF"> exec</span><span style="color:#9ECBFF"> backend</span><span style="color:#9ECBFF"> npm</span><span style="color:#9ECBFF"> test</span></span>
<span class="line"><span style="color:#B392F0">	docker-compose</span><span style="color:#9ECBFF"> exec</span><span style="color:#9ECBFF"> frontend</span><span style="color:#9ECBFF"> npm</span><span style="color:#9ECBFF"> test</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># Backup do banco</span></span>
<span class="line"><span style="color:#B392F0">backup:</span></span>
<span class="line"><span style="color:#B392F0">	docker-compose</span><span style="color:#9ECBFF"> exec</span><span style="color:#9ECBFF"> postgres</span><span style="color:#9ECBFF"> pg_dump</span><span style="color:#79B8FF"> -U</span><span style="color:#9ECBFF"> user</span><span style="color:#9ECBFF"> app</span><span style="color:#F97583"> ></span><span style="color:#9ECBFF"> backup.sql</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># Limpeza</span></span>
<span class="line"><span style="color:#B392F0">clean:</span></span>
<span class="line"><span style="color:#B392F0">	docker-compose</span><span style="color:#9ECBFF"> down</span><span style="color:#79B8FF"> -v</span></span>
<span class="line"><span style="color:#B392F0">	docker</span><span style="color:#9ECBFF"> system</span><span style="color:#9ECBFF"> prune</span><span style="color:#79B8FF"> -f</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># Desenvolvimento com hot reload</span></span>
<span class="line"><span style="color:#B392F0">dev:</span></span>
<span class="line"><span style="color:#B392F0">	docker-compose</span><span style="color:#79B8FF"> -f</span><span style="color:#9ECBFF"> docker-compose.yml</span><span style="color:#79B8FF"> -f</span><span style="color:#9ECBFF"> docker-compose.dev.yml</span><span style="color:#9ECBFF"> up</span></span></code></pre>
<h2 id="kubernetes-orquestração-de-containers">Kubernetes: Orquestração de Containers</h2>
<h3 id="1-arquitetura-básica">1. <strong>Arquitetura Básica</strong></h3>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="yaml"><code><span class="line"><span style="color:#6A737D"># namespace.yaml - Isolamento de recursos</span></span>
<span class="line"><span style="color:#85E89D">apiVersion</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">v1</span></span>
<span class="line"><span style="color:#85E89D">kind</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">Namespace</span></span>
<span class="line"><span style="color:#85E89D">metadata</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">  name</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">my-app</span></span>
<span class="line"><span style="color:#B392F0">---</span></span>
<span class="line"><span style="color:#6A737D"># deployment.yaml - Aplicação</span></span>
<span class="line"><span style="color:#85E89D">apiVersion</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">apps/v1</span></span>
<span class="line"><span style="color:#85E89D">kind</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">Deployment</span></span>
<span class="line"><span style="color:#85E89D">metadata</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">  name</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">my-app</span></span>
<span class="line"><span style="color:#85E89D">  namespace</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">my-app</span></span>
<span class="line"><span style="color:#85E89D">spec</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">  replicas</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">3</span></span>
<span class="line"><span style="color:#85E89D">  selector</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">    matchLabels</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">      app</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">my-app</span></span>
<span class="line"><span style="color:#85E89D">  template</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">    metadata</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">      labels</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">        app</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">my-app</span></span>
<span class="line"><span style="color:#85E89D">    spec</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">      containers</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">      - </span><span style="color:#85E89D">name</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">my-app</span></span>
<span class="line"><span style="color:#85E89D">        image</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">my-app:latest</span></span>
<span class="line"><span style="color:#85E89D">        ports</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">        - </span><span style="color:#85E89D">containerPort</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">3000</span></span>
<span class="line"><span style="color:#85E89D">        env</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">        - </span><span style="color:#85E89D">name</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">DATABASE_URL</span></span>
<span class="line"><span style="color:#85E89D">          valueFrom</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">            secretKeyRef</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">              name</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">my-app-secrets</span></span>
<span class="line"><span style="color:#85E89D">              key</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">database-url</span></span>
<span class="line"><span style="color:#85E89D">        resources</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">          requests</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">            memory</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"64Mi"</span></span>
<span class="line"><span style="color:#85E89D">            cpu</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"250m"</span></span>
<span class="line"><span style="color:#85E89D">          limits</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">            memory</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"128Mi"</span></span>
<span class="line"><span style="color:#85E89D">            cpu</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"500m"</span></span>
<span class="line"><span style="color:#85E89D">        livenessProbe</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">          httpGet</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">            path</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">/health</span></span>
<span class="line"><span style="color:#85E89D">            port</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">3000</span></span>
<span class="line"><span style="color:#85E89D">          initialDelaySeconds</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">30</span></span>
<span class="line"><span style="color:#85E89D">          periodSeconds</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">10</span></span>
<span class="line"><span style="color:#85E89D">        readinessProbe</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">          httpGet</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">            path</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">/ready</span></span>
<span class="line"><span style="color:#85E89D">            port</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">3000</span></span>
<span class="line"><span style="color:#85E89D">          initialDelaySeconds</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">5</span></span>
<span class="line"><span style="color:#85E89D">          periodSeconds</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">5</span></span>
<span class="line"><span style="color:#B392F0">---</span></span>
<span class="line"><span style="color:#6A737D"># service.yaml - Exposição da aplicação</span></span>
<span class="line"><span style="color:#85E89D">apiVersion</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">v1</span></span>
<span class="line"><span style="color:#85E89D">kind</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">Service</span></span>
<span class="line"><span style="color:#85E89D">metadata</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">  name</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">my-app-service</span></span>
<span class="line"><span style="color:#85E89D">  namespace</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">my-app</span></span>
<span class="line"><span style="color:#85E89D">spec</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">  selector</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">    app</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">my-app</span></span>
<span class="line"><span style="color:#85E89D">  ports</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">  - </span><span style="color:#85E89D">protocol</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">TCP</span></span>
<span class="line"><span style="color:#85E89D">    port</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">80</span></span>
<span class="line"><span style="color:#85E89D">    targetPort</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">3000</span></span>
<span class="line"><span style="color:#85E89D">  type</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">LoadBalancer</span></span></code></pre>
<h3 id="2-configmaps-e-secrets">2. <strong>ConfigMaps e Secrets</strong></h3>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="yaml"><code><span class="line"><span style="color:#6A737D"># configmap.yaml - Configurações não sensíveis</span></span>
<span class="line"><span style="color:#85E89D">apiVersion</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">v1</span></span>
<span class="line"><span style="color:#85E89D">kind</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">ConfigMap</span></span>
<span class="line"><span style="color:#85E89D">metadata</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">  name</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">my-app-config</span></span>
<span class="line"><span style="color:#85E89D">  namespace</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">my-app</span></span>
<span class="line"><span style="color:#85E89D">data</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">  app.properties</span><span style="color:#E1E4E8">: </span><span style="color:#F97583">|</span></span>
<span class="line"><span style="color:#9ECBFF">    environment=production</span></span>
<span class="line"><span style="color:#9ECBFF">    log.level=info</span></span>
<span class="line"><span style="color:#9ECBFF">    feature.flags=true</span></span>
<span class="line"><span style="color:#85E89D">  nginx.conf</span><span style="color:#E1E4E8">: </span><span style="color:#F97583">|</span></span>
<span class="line"><span style="color:#9ECBFF">    server {</span></span>
<span class="line"><span style="color:#9ECBFF">      listen 80;</span></span>
<span class="line"><span style="color:#9ECBFF">      location / {</span></span>
<span class="line"><span style="color:#9ECBFF">        proxy_pass http://my-app-service:80;</span></span>
<span class="line"><span style="color:#9ECBFF">      }</span></span>
<span class="line"><span style="color:#9ECBFF">    }</span></span>
<span class="line"><span style="color:#B392F0">---</span></span>
<span class="line"><span style="color:#6A737D"># secret.yaml - Dados sensíveis</span></span>
<span class="line"><span style="color:#85E89D">apiVersion</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">v1</span></span>
<span class="line"><span style="color:#85E89D">kind</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">Secret</span></span>
<span class="line"><span style="color:#85E89D">metadata</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">  name</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">my-app-secrets</span></span>
<span class="line"><span style="color:#85E89D">  namespace</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">my-app</span></span>
<span class="line"><span style="color:#85E89D">type</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">Opaque</span></span>
<span class="line"><span style="color:#85E89D">data</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">  database-url</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">cG9zdGdyZXNxbDovL3VzZXI6cGFzc0Bwb3N0Z3Jlcy9hcHA=</span><span style="color:#6A737D"> # base64 encoded</span></span>
<span class="line"><span style="color:#85E89D">  jwt-secret</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">eW91ci1qd3Qtc2VjcmV0LWtleQ==</span><span style="color:#6A737D"> # base64 encoded</span></span>
<span class="line"><span style="color:#85E89D">  api-key</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">eW91ci1hcGkta2V5LWhlcmU=</span><span style="color:#6A737D"> # base64 encoded</span></span></code></pre>
<h3 id="3-ingress-para-roteamento">3. <strong>Ingress para Roteamento</strong></h3>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="yaml"><code><span class="line"><span style="color:#6A737D"># ingress.yaml - Roteamento HTTP/HTTPS</span></span>
<span class="line"><span style="color:#85E89D">apiVersion</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">networking.k8s.io/v1</span></span>
<span class="line"><span style="color:#85E89D">kind</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">Ingress</span></span>
<span class="line"><span style="color:#85E89D">metadata</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">  name</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">my-app-ingress</span></span>
<span class="line"><span style="color:#85E89D">  namespace</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">my-app</span></span>
<span class="line"><span style="color:#85E89D">  annotations</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">    kubernetes.io/ingress.class</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">nginx</span></span>
<span class="line"><span style="color:#85E89D">    cert-manager.io/cluster-issuer</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">letsencrypt-prod</span></span>
<span class="line"><span style="color:#85E89D">    nginx.ingress.kubernetes.io/ssl-redirect</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"true"</span></span>
<span class="line"><span style="color:#85E89D">    nginx.ingress.kubernetes.io/rate-limit</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"100"</span></span>
<span class="line"><span style="color:#85E89D">spec</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">  tls</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">  - </span><span style="color:#85E89D">hosts</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">    - </span><span style="color:#9ECBFF">api.myapp.com</span></span>
<span class="line"><span style="color:#E1E4E8">    - </span><span style="color:#9ECBFF">app.myapp.com</span></span>
<span class="line"><span style="color:#85E89D">    secretName</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">my-app-tls</span></span>
<span class="line"><span style="color:#85E89D">  rules</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">  - </span><span style="color:#85E89D">host</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">api.myapp.com</span></span>
<span class="line"><span style="color:#85E89D">    http</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">      paths</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">      - </span><span style="color:#85E89D">path</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">/</span></span>
<span class="line"><span style="color:#85E89D">        pathType</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">Prefix</span></span>
<span class="line"><span style="color:#85E89D">        backend</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">          service</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">            name</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">my-app-api-service</span></span>
<span class="line"><span style="color:#85E89D">            port</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">              number</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">80</span></span>
<span class="line"><span style="color:#E1E4E8">  - </span><span style="color:#85E89D">host</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">app.myapp.com</span></span>
<span class="line"><span style="color:#85E89D">    http</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">      paths</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">      - </span><span style="color:#85E89D">path</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">/</span></span>
<span class="line"><span style="color:#85E89D">        pathType</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">Prefix</span></span>
<span class="line"><span style="color:#85E89D">        backend</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">          service</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">            name</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">my-app-frontend-service</span></span>
<span class="line"><span style="color:#85E89D">            port</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">              number</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">80</span></span></code></pre>
<h2 id="pipeline-cicd-completo">Pipeline CI/CD Completo</h2>
<h3 id="1-github-actions--docker">1. <strong>GitHub Actions + Docker</strong></h3>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="yaml"><code><span class="line"><span style="color:#6A737D"># .github/workflows/deploy.yml</span></span>
<span class="line"><span style="color:#85E89D">name</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">Build and Deploy</span></span>
<span class="line"></span>
<span class="line"><span style="color:#79B8FF">on</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">  push</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">    branches</span><span style="color:#E1E4E8">: [</span><span style="color:#9ECBFF">main</span><span style="color:#E1E4E8">]</span></span>
<span class="line"><span style="color:#85E89D">  pull_request</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">    branches</span><span style="color:#E1E4E8">: [</span><span style="color:#9ECBFF">main</span><span style="color:#E1E4E8">]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#85E89D">env</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">  REGISTRY</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">ghcr.io</span></span>
<span class="line"><span style="color:#85E89D">  IMAGE_NAME</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">${{ github.repository }}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#85E89D">jobs</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">  test</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">    runs-on</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">ubuntu-latest</span></span>
<span class="line"><span style="color:#85E89D">    steps</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">    - </span><span style="color:#85E89D">uses</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">actions/checkout@v3</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">    - </span><span style="color:#85E89D">name</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">Setup Node.js</span></span>
<span class="line"><span style="color:#85E89D">      uses</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">actions/setup-node@v3</span></span>
<span class="line"><span style="color:#85E89D">      with</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">        node-version</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">'18'</span></span>
<span class="line"><span style="color:#85E89D">        cache</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">'npm'</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">    - </span><span style="color:#85E89D">name</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">Install dependencies</span></span>
<span class="line"><span style="color:#85E89D">      run</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">npm ci</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">    - </span><span style="color:#85E89D">name</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">Run tests</span></span>
<span class="line"><span style="color:#85E89D">      run</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">npm test</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">    - </span><span style="color:#85E89D">name</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">Run E2E tests</span></span>
<span class="line"><span style="color:#85E89D">      run</span><span style="color:#E1E4E8">: </span><span style="color:#F97583">|</span></span>
<span class="line"><span style="color:#9ECBFF">        docker-compose -f docker-compose.test.yml up -d</span></span>
<span class="line"><span style="color:#9ECBFF">        npm run test:e2e</span></span>
<span class="line"><span style="color:#9ECBFF">        docker-compose -f docker-compose.test.yml down</span></span>
<span class="line"></span>
<span class="line"><span style="color:#85E89D">  build</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">    needs</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">test</span></span>
<span class="line"><span style="color:#85E89D">    runs-on</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">ubuntu-latest</span></span>
<span class="line"><span style="color:#85E89D">    if</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">github.ref == 'refs/heads/main'</span></span>
<span class="line"></span>
<span class="line"><span style="color:#85E89D">    steps</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">    - </span><span style="color:#85E89D">uses</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">actions/checkout@v3</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">    - </span><span style="color:#85E89D">name</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">Set up Docker Buildx</span></span>
<span class="line"><span style="color:#85E89D">      uses</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">docker/setup-buildx-action@v2</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">    - </span><span style="color:#85E89D">name</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">Log in to Container Registry</span></span>
<span class="line"><span style="color:#85E89D">      uses</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">docker/login-action@v2</span></span>
<span class="line"><span style="color:#85E89D">      with</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">        registry</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">${{ env.REGISTRY }}</span></span>
<span class="line"><span style="color:#85E89D">        username</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">${{ github.actor }}</span></span>
<span class="line"><span style="color:#85E89D">        password</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">${{ secrets.GITHUB_TOKEN }}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">    - </span><span style="color:#85E89D">name</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">Extract metadata</span></span>
<span class="line"><span style="color:#85E89D">      id</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">meta</span></span>
<span class="line"><span style="color:#85E89D">      uses</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">docker/metadata-action@v4</span></span>
<span class="line"><span style="color:#85E89D">      with</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">        images</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">${{ env.REGISTRY }}/${{ env.IMAGE_NAME }}</span></span>
<span class="line"><span style="color:#85E89D">        tags</span><span style="color:#E1E4E8">: </span><span style="color:#F97583">|</span></span>
<span class="line"><span style="color:#9ECBFF">          type=ref,event=branch</span></span>
<span class="line"><span style="color:#9ECBFF">          type=sha,prefix={{branch}}-</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">    - </span><span style="color:#85E89D">name</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">Build and push Docker image</span></span>
<span class="line"><span style="color:#85E89D">      uses</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">docker/build-push-action@v4</span></span>
<span class="line"><span style="color:#85E89D">      with</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">        context</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">.</span></span>
<span class="line"><span style="color:#85E89D">        push</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">true</span></span>
<span class="line"><span style="color:#85E89D">        tags</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">${{ steps.meta.outputs.tags }}</span></span>
<span class="line"><span style="color:#85E89D">        labels</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">${{ steps.meta.outputs.labels }}</span></span>
<span class="line"><span style="color:#85E89D">        cache-from</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">type=gha</span></span>
<span class="line"><span style="color:#85E89D">        cache-to</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">type=gha,mode=max</span></span>
<span class="line"></span>
<span class="line"><span style="color:#85E89D">  deploy</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">    needs</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">build</span></span>
<span class="line"><span style="color:#85E89D">    runs-on</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">ubuntu-latest</span></span>
<span class="line"><span style="color:#85E89D">    environment</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">production</span></span>
<span class="line"></span>
<span class="line"><span style="color:#85E89D">    steps</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">    - </span><span style="color:#85E89D">uses</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">actions/checkout@v3</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">    - </span><span style="color:#85E89D">name</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">Set up kubectl</span></span>
<span class="line"><span style="color:#85E89D">      uses</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">azure/setup-kubectl@v3</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">    - </span><span style="color:#85E89D">name</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">Configure kubectl</span></span>
<span class="line"><span style="color:#85E89D">      run</span><span style="color:#E1E4E8">: </span><span style="color:#F97583">|</span></span>
<span class="line"><span style="color:#9ECBFF">        echo "${{ secrets.KUBECONFIG }}" | base64 -d > kubeconfig</span></span>
<span class="line"><span style="color:#9ECBFF">        export KUBECONFIG=kubeconfig</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">    - </span><span style="color:#85E89D">name</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">Deploy to Kubernetes</span></span>
<span class="line"><span style="color:#85E89D">      run</span><span style="color:#E1E4E8">: </span><span style="color:#F97583">|</span></span>
<span class="line"><span style="color:#9ECBFF">        # Update image in deployment</span></span>
<span class="line"><span style="color:#9ECBFF">        kubectl set image deployment/my-app my-app=${{ env.REGISTRY }}/${{ env.IMAGE_NAME }}:main-${{ github.sha }} -n my-app</span></span>
<span class="line"></span>
<span class="line"><span style="color:#9ECBFF">        # Wait for rollout</span></span>
<span class="line"><span style="color:#9ECBFF">        kubectl rollout status deployment/my-app -n my-app --timeout=600s</span></span>
<span class="line"></span>
<span class="line"><span style="color:#9ECBFF">        # Verify deployment</span></span>
<span class="line"><span style="color:#9ECBFF">        kubectl get pods -n my-app</span></span></code></pre>
<h3 id="2-gitlab-cicd">2. <strong>GitLab CI/CD</strong></h3>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="yaml"><code><span class="line"><span style="color:#6A737D"># .gitlab-ci.yml</span></span>
<span class="line"><span style="color:#85E89D">stages</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">  - </span><span style="color:#9ECBFF">test</span></span>
<span class="line"><span style="color:#E1E4E8">  - </span><span style="color:#9ECBFF">build</span></span>
<span class="line"><span style="color:#E1E4E8">  - </span><span style="color:#9ECBFF">deploy</span></span>
<span class="line"></span>
<span class="line"><span style="color:#85E89D">variables</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">  DOCKER_DRIVER</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">overlay2</span></span>
<span class="line"><span style="color:#85E89D">  DOCKER_TLS_CERTDIR</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"/certs"</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># Testes</span></span>
<span class="line"><span style="color:#85E89D">test</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">  stage</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">test</span></span>
<span class="line"><span style="color:#85E89D">  image</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">node:18</span></span>
<span class="line"><span style="color:#85E89D">  script</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">    - </span><span style="color:#9ECBFF">npm ci</span></span>
<span class="line"><span style="color:#E1E4E8">    - </span><span style="color:#9ECBFF">npm run test:coverage</span></span>
<span class="line"><span style="color:#85E89D">  artifacts</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">    reports</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">      coverage_report</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">        coverage_format</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">cobertura</span></span>
<span class="line"><span style="color:#85E89D">        path</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">coverage/cobertura-coverage.xml</span></span>
<span class="line"><span style="color:#85E89D">  coverage</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">'/Statements.*?(\d+(?:\.\d+)?)%/'</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># Build da imagem Docker</span></span>
<span class="line"><span style="color:#85E89D">build</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">  stage</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">build</span></span>
<span class="line"><span style="color:#85E89D">  image</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">docker:20.10.16</span></span>
<span class="line"><span style="color:#85E89D">  services</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">    - </span><span style="color:#9ECBFF">docker:20.10.16-dind</span></span>
<span class="line"><span style="color:#85E89D">  before_script</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">    - </span><span style="color:#9ECBFF">echo $CI_REGISTRY_PASSWORD | docker login -u $CI_REGISTRY_USER --password-stdin $CI_REGISTRY</span></span>
<span class="line"><span style="color:#85E89D">  script</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">    - </span><span style="color:#9ECBFF">docker build -t $CI_REGISTRY_IMAGE:$CI_COMMIT_SHA .</span></span>
<span class="line"><span style="color:#E1E4E8">    - </span><span style="color:#9ECBFF">docker push $CI_REGISTRY_IMAGE:$CI_COMMIT_SHA</span></span>
<span class="line"><span style="color:#E1E4E8">    - </span><span style="color:#9ECBFF">docker tag $CI_REGISTRY_IMAGE:$CI_COMMIT_SHA $CI_REGISTRY_IMAGE:latest</span></span>
<span class="line"><span style="color:#E1E4E8">    - </span><span style="color:#9ECBFF">docker push $CI_REGISTRY_IMAGE:latest</span></span>
<span class="line"><span style="color:#85E89D">  only</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">    - </span><span style="color:#9ECBFF">main</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># Deploy para Kubernetes</span></span>
<span class="line"><span style="color:#85E89D">deploy:production</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">  stage</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">deploy</span></span>
<span class="line"><span style="color:#85E89D">  image</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">bitnami/kubectl:latest</span></span>
<span class="line"><span style="color:#85E89D">  script</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">    - </span><span style="color:#9ECBFF">kubectl config use-context $KUBE_CONTEXT</span></span>
<span class="line"><span style="color:#E1E4E8">    - </span><span style="color:#9ECBFF">kubectl set image deployment/my-app my-app=$CI_REGISTRY_IMAGE:$CI_COMMIT_SHA -n production</span></span>
<span class="line"><span style="color:#E1E4E8">    - </span><span style="color:#9ECBFF">kubectl rollout status deployment/my-app -n production</span></span>
<span class="line"><span style="color:#85E89D">  environment</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">    name</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">production</span></span>
<span class="line"><span style="color:#85E89D">    url</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">https://myapp.com</span></span>
<span class="line"><span style="color:#85E89D">  only</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">    - </span><span style="color:#9ECBFF">main</span></span>
<span class="line"><span style="color:#85E89D">  when</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">manual</span></span></code></pre>
<h2 id="monitoramento-e-observabilidade">Monitoramento e Observabilidade</h2>
<h3 id="1-prometheus--grafana">1. <strong>Prometheus + Grafana</strong></h3>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="yaml"><code><span class="line"><span style="color:#6A737D"># monitoring.yaml</span></span>
<span class="line"><span style="color:#85E89D">apiVersion</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">v1</span></span>
<span class="line"><span style="color:#85E89D">kind</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">ConfigMap</span></span>
<span class="line"><span style="color:#85E89D">metadata</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">  name</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">prometheus-config</span></span>
<span class="line"><span style="color:#85E89D">  namespace</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">monitoring</span></span>
<span class="line"><span style="color:#85E89D">data</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">  prometheus.yml</span><span style="color:#E1E4E8">: </span><span style="color:#F97583">|</span></span>
<span class="line"><span style="color:#9ECBFF">    global:</span></span>
<span class="line"><span style="color:#9ECBFF">      scrape_interval: 15s</span></span>
<span class="line"></span>
<span class="line"><span style="color:#9ECBFF">    scrape_configs:</span></span>
<span class="line"><span style="color:#9ECBFF">    - job_name: 'kubernetes-pods'</span></span>
<span class="line"><span style="color:#9ECBFF">      kubernetes_sd_configs:</span></span>
<span class="line"><span style="color:#9ECBFF">      - role: pod</span></span>
<span class="line"><span style="color:#9ECBFF">      relabel_configs:</span></span>
<span class="line"><span style="color:#9ECBFF">      - source_labels: [__meta_kubernetes_pod_annotation_prometheus_io_scrape]</span></span>
<span class="line"><span style="color:#9ECBFF">        action: keep</span></span>
<span class="line"><span style="color:#9ECBFF">        regex: true</span></span>
<span class="line"><span style="color:#9ECBFF">      - source_labels: [__meta_kubernetes_pod_annotation_prometheus_io_path]</span></span>
<span class="line"><span style="color:#9ECBFF">        action: replace</span></span>
<span class="line"><span style="color:#9ECBFF">        target_label: __metrics_path__</span></span>
<span class="line"><span style="color:#9ECBFF">        regex: (.+)</span></span>
<span class="line"><span style="color:#B392F0">---</span></span>
<span class="line"><span style="color:#85E89D">apiVersion</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">apps/v1</span></span>
<span class="line"><span style="color:#85E89D">kind</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">Deployment</span></span>
<span class="line"><span style="color:#85E89D">metadata</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">  name</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">grafana</span></span>
<span class="line"><span style="color:#85E89D">  namespace</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">monitoring</span></span>
<span class="line"><span style="color:#85E89D">spec</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">  replicas</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">1</span></span>
<span class="line"><span style="color:#85E89D">  selector</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">    matchLabels</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">      app</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">grafana</span></span>
<span class="line"><span style="color:#85E89D">  template</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">    metadata</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">      labels</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">        app</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">grafana</span></span>
<span class="line"><span style="color:#85E89D">    spec</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">      containers</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">      - </span><span style="color:#85E89D">name</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">grafana</span></span>
<span class="line"><span style="color:#85E89D">        image</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">grafana/grafana:latest</span></span>
<span class="line"><span style="color:#85E89D">        ports</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">        - </span><span style="color:#85E89D">containerPort</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">3000</span></span>
<span class="line"><span style="color:#85E89D">        env</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">        - </span><span style="color:#85E89D">name</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">GF_SECURITY_ADMIN_PASSWORD</span></span>
<span class="line"><span style="color:#85E89D">          valueFrom</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">            secretKeyRef</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">              name</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">grafana-secrets</span></span>
<span class="line"><span style="color:#85E89D">              key</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">admin-password</span></span>
<span class="line"><span style="color:#85E89D">        volumeMounts</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">        - </span><span style="color:#85E89D">name</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">grafana-storage</span></span>
<span class="line"><span style="color:#85E89D">          mountPath</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">/var/lib/grafana</span></span>
<span class="line"><span style="color:#85E89D">      volumes</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">      - </span><span style="color:#85E89D">name</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">grafana-storage</span></span>
<span class="line"><span style="color:#85E89D">        persistentVolumeClaim</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">          claimName</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">grafana-pvc</span></span></code></pre>
<h3 id="2-logging-com-elk-stack">2. <strong>Logging com ELK Stack</strong></h3>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="yaml"><code><span class="line"><span style="color:#6A737D"># elasticsearch.yaml</span></span>
<span class="line"><span style="color:#85E89D">apiVersion</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">apps/v1</span></span>
<span class="line"><span style="color:#85E89D">kind</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">StatefulSet</span></span>
<span class="line"><span style="color:#85E89D">metadata</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">  name</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">elasticsearch</span></span>
<span class="line"><span style="color:#85E89D">  namespace</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">logging</span></span>
<span class="line"><span style="color:#85E89D">spec</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">  serviceName</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">elasticsearch</span></span>
<span class="line"><span style="color:#85E89D">  replicas</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">3</span></span>
<span class="line"><span style="color:#85E89D">  selector</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">    matchLabels</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">      app</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">elasticsearch</span></span>
<span class="line"><span style="color:#85E89D">  template</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">    metadata</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">      labels</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">        app</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">elasticsearch</span></span>
<span class="line"><span style="color:#85E89D">    spec</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">      containers</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">      - </span><span style="color:#85E89D">name</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">elasticsearch</span></span>
<span class="line"><span style="color:#85E89D">        image</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">docker.elastic.co/elasticsearch/elasticsearch:8.5.0</span></span>
<span class="line"><span style="color:#85E89D">        env</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">        - </span><span style="color:#85E89D">name</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">cluster.name</span></span>
<span class="line"><span style="color:#85E89D">          value</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"kubernetes-logs"</span></span>
<span class="line"><span style="color:#E1E4E8">        - </span><span style="color:#85E89D">name</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">node.name</span></span>
<span class="line"><span style="color:#85E89D">          valueFrom</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">            fieldRef</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">              fieldPath</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">metadata.name</span></span>
<span class="line"><span style="color:#E1E4E8">        - </span><span style="color:#85E89D">name</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">discovery.seed_hosts</span></span>
<span class="line"><span style="color:#85E89D">          value</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"elasticsearch-0.elasticsearch,elasticsearch-1.elasticsearch,elasticsearch-2.elasticsearch"</span></span>
<span class="line"><span style="color:#E1E4E8">        - </span><span style="color:#85E89D">name</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">cluster.initial_master_nodes</span></span>
<span class="line"><span style="color:#85E89D">          value</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"elasticsearch-0,elasticsearch-1,elasticsearch-2"</span></span>
<span class="line"><span style="color:#E1E4E8">        - </span><span style="color:#85E89D">name</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">ES_JAVA_OPTS</span></span>
<span class="line"><span style="color:#85E89D">          value</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"-Xms1g -Xmx1g"</span></span>
<span class="line"><span style="color:#85E89D">        ports</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">        - </span><span style="color:#85E89D">containerPort</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">9200</span></span>
<span class="line"><span style="color:#E1E4E8">        - </span><span style="color:#85E89D">containerPort</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">9300</span></span>
<span class="line"><span style="color:#85E89D">        volumeMounts</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">        - </span><span style="color:#85E89D">name</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">elasticsearch-data</span></span>
<span class="line"><span style="color:#85E89D">          mountPath</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">/usr/share/elasticsearch/data</span></span>
<span class="line"><span style="color:#85E89D">  volumeClaimTemplates</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">  - </span><span style="color:#85E89D">metadata</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">      name</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">elasticsearch-data</span></span>
<span class="line"><span style="color:#85E89D">    spec</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">      accessModes</span><span style="color:#E1E4E8">: [</span><span style="color:#9ECBFF">"ReadWriteOnce"</span><span style="color:#E1E4E8">]</span></span>
<span class="line"><span style="color:#85E89D">      resources</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">        requests</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">          storage</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">10Gi</span></span></code></pre>
<h2 id="segurança-em-containers">Segurança em Containers</h2>
<h3 id="1-security-best-practices">1. <strong>Security Best Practices</strong></h3>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="dockerfile"><code><span class="line"><span style="color:#6A737D"># Dockerfile seguro</span></span>
<span class="line"><span style="color:#F97583">FROM</span><span style="color:#E1E4E8"> node:18-alpine </span><span style="color:#F97583">AS</span><span style="color:#E1E4E8"> base</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># Criar usuário não-root</span></span>
<span class="line"><span style="color:#F97583">RUN</span><span style="color:#E1E4E8"> addgroup -g 1001 -S nodejs</span></span>
<span class="line"><span style="color:#F97583">RUN</span><span style="color:#E1E4E8"> adduser -S nextjs -u 1001</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># Multi-stage build</span></span>
<span class="line"><span style="color:#F97583">FROM</span><span style="color:#E1E4E8"> base </span><span style="color:#F97583">AS</span><span style="color:#E1E4E8"> deps</span></span>
<span class="line"><span style="color:#F97583">WORKDIR</span><span style="color:#E1E4E8"> /app</span></span>
<span class="line"><span style="color:#F97583">COPY</span><span style="color:#E1E4E8"> package*.json ./</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># Usar npm ci em produção</span></span>
<span class="line"><span style="color:#F97583">RUN</span><span style="color:#E1E4E8"> npm ci --only=production &#x26;&#x26; npm cache clean --force</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">FROM</span><span style="color:#E1E4E8"> base </span><span style="color:#F97583">AS</span><span style="color:#E1E4E8"> builder</span></span>
<span class="line"><span style="color:#F97583">WORKDIR</span><span style="color:#E1E4E8"> /app</span></span>
<span class="line"><span style="color:#F97583">COPY</span><span style="color:#E1E4E8"> --from=deps /app/node_modules ./node_modules</span></span>
<span class="line"><span style="color:#F97583">COPY</span><span style="color:#E1E4E8"> . .</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># Build da aplicação</span></span>
<span class="line"><span style="color:#F97583">RUN</span><span style="color:#E1E4E8"> npm run build</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># Imagem de produção</span></span>
<span class="line"><span style="color:#F97583">FROM</span><span style="color:#E1E4E8"> base </span><span style="color:#F97583">AS</span><span style="color:#E1E4E8"> runner</span></span>
<span class="line"><span style="color:#F97583">WORKDIR</span><span style="color:#E1E4E8"> /app</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">ENV</span><span style="color:#E1E4E8"> NODE_ENV production</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># Copiar apenas arquivos necessários</span></span>
<span class="line"><span style="color:#F97583">COPY</span><span style="color:#E1E4E8"> --from=builder --chown=nextjs:nodejs /app/.next/standalone ./</span></span>
<span class="line"><span style="color:#F97583">COPY</span><span style="color:#E1E4E8"> --from=builder --chown=nextjs:nodejs /app/.next/static ./.next/static</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># Usar usuário não-root</span></span>
<span class="line"><span style="color:#F97583">USER</span><span style="color:#E1E4E8"> nextjs</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">EXPOSE</span><span style="color:#E1E4E8"> 3000</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">ENV</span><span style="color:#E1E4E8"> PORT 3000</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># Usar exec form para sinais corretos</span></span>
<span class="line"><span style="color:#F97583">CMD</span><span style="color:#E1E4E8"> [</span><span style="color:#9ECBFF">"node"</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">"server.js"</span><span style="color:#E1E4E8">]</span></span></code></pre>
<h3 id="2-kubernetes-security-policies">2. <strong>Kubernetes Security Policies</strong></h3>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="yaml"><code><span class="line"><span style="color:#6A737D"># security-policy.yaml</span></span>
<span class="line"><span style="color:#85E89D">apiVersion</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">policy/v1beta1</span></span>
<span class="line"><span style="color:#85E89D">kind</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">PodSecurityPolicy</span></span>
<span class="line"><span style="color:#85E89D">metadata</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">  name</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">restricted</span></span>
<span class="line"><span style="color:#85E89D">spec</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">  privileged</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">false</span></span>
<span class="line"><span style="color:#85E89D">  allowPrivilegeEscalation</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">false</span></span>
<span class="line"><span style="color:#85E89D">  requiredDropCapabilities</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">    - </span><span style="color:#9ECBFF">ALL</span></span>
<span class="line"><span style="color:#85E89D">  volumes</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">    - </span><span style="color:#9ECBFF">'configMap'</span></span>
<span class="line"><span style="color:#E1E4E8">    - </span><span style="color:#9ECBFF">'emptyDir'</span></span>
<span class="line"><span style="color:#E1E4E8">    - </span><span style="color:#9ECBFF">'projected'</span></span>
<span class="line"><span style="color:#E1E4E8">    - </span><span style="color:#9ECBFF">'secret'</span></span>
<span class="line"><span style="color:#E1E4E8">    - </span><span style="color:#9ECBFF">'downwardAPI'</span></span>
<span class="line"><span style="color:#E1E4E8">    - </span><span style="color:#9ECBFF">'persistentVolumeClaim'</span></span>
<span class="line"><span style="color:#85E89D">  runAsUser</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">    rule</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">'MustRunAsNonRoot'</span></span>
<span class="line"><span style="color:#85E89D">  seLinux</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">    rule</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">'RunAsAny'</span></span>
<span class="line"><span style="color:#85E89D">  fsGroup</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">    rule</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">'RunAsAny'</span></span>
<span class="line"><span style="color:#B392F0">---</span></span>
<span class="line"><span style="color:#6A737D"># network-policy.yaml</span></span>
<span class="line"><span style="color:#85E89D">apiVersion</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">networking.k8s.io/v1</span></span>
<span class="line"><span style="color:#85E89D">kind</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">NetworkPolicy</span></span>
<span class="line"><span style="color:#85E89D">metadata</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">  name</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">deny-all-ingress</span></span>
<span class="line"><span style="color:#85E89D">  namespace</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">my-app</span></span>
<span class="line"><span style="color:#85E89D">spec</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">  podSelector</span><span style="color:#E1E4E8">: {}</span></span>
<span class="line"><span style="color:#85E89D">  policyTypes</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">  - </span><span style="color:#9ECBFF">Ingress</span></span>
<span class="line"><span style="color:#E1E4E8">  - </span><span style="color:#9ECBFF">Egress</span></span>
<span class="line"><span style="color:#85E89D">  egress</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">  - </span><span style="color:#85E89D">to</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">    - </span><span style="color:#85E89D">namespaceSelector</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">        matchLabels</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">          name</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">kube-system</span></span>
<span class="line"><span style="color:#85E89D">    ports</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">    - </span><span style="color:#85E89D">protocol</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">TCP</span></span>
<span class="line"><span style="color:#85E89D">      port</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">53</span></span>
<span class="line"><span style="color:#E1E4E8">    - </span><span style="color:#85E89D">protocol</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">UDP</span></span>
<span class="line"><span style="color:#85E89D">      port</span><span style="color:#E1E4E8">: </span><span style="color:#79B8FF">53</span></span></code></pre>
<h2 id="troubleshooting-e-debug">Troubleshooting e Debug</h2>
<h3 id="1-comandos-essenciais">1. <strong>Comandos Essenciais</strong></h3>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#6A737D"># Docker debugging</span></span>
<span class="line"><span style="color:#B392F0">docker</span><span style="color:#9ECBFF"> logs</span><span style="color:#F97583"> &#x3C;</span><span style="color:#9ECBFF">container-i</span><span style="color:#E1E4E8">d</span><span style="color:#F97583">></span><span style="color:#79B8FF"> --follow</span></span>
<span class="line"><span style="color:#B392F0">docker</span><span style="color:#9ECBFF"> exec</span><span style="color:#79B8FF"> -it</span><span style="color:#F97583"> &#x3C;</span><span style="color:#9ECBFF">container-i</span><span style="color:#E1E4E8">d</span><span style="color:#F97583">></span><span style="color:#9ECBFF"> /bin/sh</span></span>
<span class="line"><span style="color:#B392F0">docker</span><span style="color:#9ECBFF"> stats</span><span style="color:#F97583"> &#x3C;</span><span style="color:#9ECBFF">container-i</span><span style="color:#E1E4E8">d</span><span style="color:#F97583">></span></span>
<span class="line"><span style="color:#B392F0">docker</span><span style="color:#9ECBFF"> inspect</span><span style="color:#F97583"> &#x3C;</span><span style="color:#9ECBFF">container-i</span><span style="color:#E1E4E8">d</span><span style="color:#F97583">></span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># Kubernetes debugging</span></span>
<span class="line"><span style="color:#B392F0">kubectl</span><span style="color:#9ECBFF"> get</span><span style="color:#9ECBFF"> pods</span><span style="color:#79B8FF"> -n</span><span style="color:#9ECBFF"> my-app</span></span>
<span class="line"><span style="color:#B392F0">kubectl</span><span style="color:#9ECBFF"> describe</span><span style="color:#9ECBFF"> pod</span><span style="color:#F97583"> &#x3C;</span><span style="color:#9ECBFF">pod-nam</span><span style="color:#E1E4E8">e</span><span style="color:#F97583">></span><span style="color:#79B8FF"> -n</span><span style="color:#9ECBFF"> my-app</span></span>
<span class="line"><span style="color:#B392F0">kubectl</span><span style="color:#9ECBFF"> logs</span><span style="color:#F97583"> &#x3C;</span><span style="color:#9ECBFF">pod-nam</span><span style="color:#E1E4E8">e</span><span style="color:#F97583">></span><span style="color:#79B8FF"> -n</span><span style="color:#9ECBFF"> my-app</span><span style="color:#79B8FF"> --follow</span></span>
<span class="line"><span style="color:#B392F0">kubectl</span><span style="color:#9ECBFF"> exec</span><span style="color:#79B8FF"> -it</span><span style="color:#F97583"> &#x3C;</span><span style="color:#9ECBFF">pod-nam</span><span style="color:#E1E4E8">e</span><span style="color:#F97583">></span><span style="color:#79B8FF"> -n</span><span style="color:#9ECBFF"> my-app</span><span style="color:#79B8FF"> --</span><span style="color:#9ECBFF"> /bin/sh</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># Debug de recursos</span></span>
<span class="line"><span style="color:#B392F0">kubectl</span><span style="color:#9ECBFF"> top</span><span style="color:#9ECBFF"> nodes</span></span>
<span class="line"><span style="color:#B392F0">kubectl</span><span style="color:#9ECBFF"> top</span><span style="color:#9ECBFF"> pods</span><span style="color:#79B8FF"> -n</span><span style="color:#9ECBFF"> my-app</span></span>
<span class="line"><span style="color:#B392F0">kubectl</span><span style="color:#9ECBFF"> get</span><span style="color:#9ECBFF"> events</span><span style="color:#79B8FF"> --sort-by=.metadata.creationTimestamp</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># Debug de network</span></span>
<span class="line"><span style="color:#B392F0">kubectl</span><span style="color:#9ECBFF"> run</span><span style="color:#9ECBFF"> debug</span><span style="color:#79B8FF"> --image=nicolaka/netshoot</span><span style="color:#79B8FF"> -it</span><span style="color:#79B8FF"> --rm</span></span>
<span class="line"><span style="color:#6A737D"># Dentro do pod:</span></span>
<span class="line"><span style="color:#B392F0">nslookup</span><span style="color:#9ECBFF"> my-service.my-app.svc.cluster.local</span></span>
<span class="line"><span style="color:#B392F0">curl</span><span style="color:#79B8FF"> -v</span><span style="color:#9ECBFF"> http://my-service.my-app.svc.cluster.local</span></span></code></pre>
<h3 id="2-troubleshooting-common-issues">2. <strong>Troubleshooting Common Issues</strong></h3>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;" tabindex="0" data-language="yaml"><code><span class="line"><span style="color:#6A737D"># Debug pod para troubleshooting</span></span>
<span class="line"><span style="color:#85E89D">apiVersion</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">v1</span></span>
<span class="line"><span style="color:#85E89D">kind</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">Pod</span></span>
<span class="line"><span style="color:#85E89D">metadata</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">  name</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">debug-pod</span></span>
<span class="line"><span style="color:#85E89D">  namespace</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">my-app</span></span>
<span class="line"><span style="color:#85E89D">spec</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">  containers</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">  - </span><span style="color:#85E89D">name</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">debug</span></span>
<span class="line"><span style="color:#85E89D">    image</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">nicolaka/netshoot</span></span>
<span class="line"><span style="color:#85E89D">    command</span><span style="color:#E1E4E8">: [</span><span style="color:#9ECBFF">"/bin/bash"</span><span style="color:#E1E4E8">]</span></span>
<span class="line"><span style="color:#85E89D">    args</span><span style="color:#E1E4E8">: [</span><span style="color:#9ECBFF">"-c"</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">"while true; do sleep 30; done"</span><span style="color:#E1E4E8">]</span></span>
<span class="line"><span style="color:#85E89D">    resources</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">      requests</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">        memory</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"64Mi"</span></span>
<span class="line"><span style="color:#85E89D">        cpu</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"50m"</span></span>
<span class="line"><span style="color:#85E89D">      limits</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#85E89D">        memory</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"128Mi"</span></span>
<span class="line"><span style="color:#85E89D">        cpu</span><span style="color:#E1E4E8">: </span><span style="color:#9ECBFF">"100m"</span></span></code></pre>
<h2 id="conclusão-devops-como-vantagem-competitiva">Conclusão: DevOps como Vantagem Competitiva</h2>
<p>DevOps não é apenas sobre ferramentas - é sobre <strong>cultura, automação e entrega contínua de valor</strong>. Com Docker e Kubernetes, você tem:</p>
<h3 id="-benefícios-conquistados">✅ <strong>Benefícios Conquistados:</strong></h3>
<ul>
<li><strong>Desenvolvimento</strong>: ambiente reproduzível</li>
<li><strong>Deploy</strong>: automatizado e confiável</li>
<li><strong>Escala</strong>: automática conforme demanda</li>
<li><strong>Monitoramento</strong>: visibilidade completa</li>
<li><strong>Segurança</strong>: práticas integradas</li>
</ul>
<h3 id="-próximos-passos">🚀 <strong>Próximos Passos:</strong></h3>
<ol>
<li><strong>Dockerize</strong> uma aplicação simples</li>
<li><strong>Deploy</strong> no Kubernetes local (minikube)</li>
<li><strong>Configure</strong> pipeline CI/CD</li>
<li><strong>Implemente</strong> monitoramento</li>
<li><strong>Pratique</strong> troubleshooting</li>
</ol>
<h3 id="-roi-esperado">📈 <strong>ROI Esperado:</strong></h3>
<ul>
<li><strong>90% redução</strong> no tempo de deploy</li>
<li><strong>80% menos</strong> bugs em produção</li>
<li><strong>Zero downtime</strong> em atualizações</li>
<li><strong>Escalabilidade</strong> automática</li>
</ul>
<hr>
<p><strong>DevOps não é destino, é jornada.</strong> Comece pequeno, automatize incremental e transforme sua forma de entregar software.</p>
<p><em>Já usa Docker e Kubernetes? Qual foi sua maior lição aprendida? Compartilhe sua experiência!</em></p>  </div> <!-- Share Buttons --> <div class="mt-12 pt-8 border-t border-slate-800"> <div class="flex flex-col sm:flex-row items-center justify-between space-y-4 sm:space-y-0"> <h3 class="text-lg font-semibold text-white">Compartilhe este post</h3> <div class="flex items-center space-x-4"> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fcoders.ia.br%2Fblog%2Fdevops-docker-kubernetes%2F" target="_blank" rel="noopener noreferrer" class="flex items-center space-x-2 px-4 py-2 bg-slate-800 hover:bg-slate-700 text-slate-300 hover:text-white rounded-lg transition-all duration-200"> <svg xmlns="http://www.w3.org/2000/svg" stroke-width="2" width="24" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" fill="none" viewBox="0 0 24 24" class="lucide lucide-linkedin w-4 h-4">  <path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path> <rect width="4" height="12" x="2" y="9"></rect> <circle cx="4" cy="4" r="2"></circle>  </svg> <span class="hidden sm:inline">LinkedIn</span> </a> <a href="https://wa.me/?text=DevOps%20Moderno%3A%20Docker%20e%20Kubernetes%20na%20Pr%C3%A1tica%20para%20Desenvolvedores https%3A%2F%2Fcoders.ia.br%2Fblog%2Fdevops-docker-kubernetes%2F" target="_blank" rel="noopener noreferrer" class="flex items-center space-x-2 px-4 py-2 bg-slate-800 hover:bg-slate-700 text-slate-300 hover:text-white rounded-lg transition-all duration-200"> <svg xmlns="http://www.w3.org/2000/svg" stroke-width="2" width="24" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" fill="none" viewBox="0 0 24 24" class="lucide lucide-message-circle w-4 h-4">  <path d="M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719"></path>  </svg> <span class="hidden sm:inline">WhatsApp</span> </a> </div> </div> </div> <!-- Navigation to other posts could be added here --> </article>  </main> <!-- Footer --> <footer class="border-t border-slate-800 bg-slate-950"> <div class="container mx-auto px-4 py-8"> <div class="text-center"> <div class="flex items-center justify-center space-x-2 mb-2"> <img src="/glider-white.svg" alt="Coders.ia.br Logo" class="w-6 h-6 opacity-60"> <span class="text-slate-400 font-mono">© 2025 CODERS.IA.BR. TODOS OS DIREITOS RESERVADOS.</span> </div> </div> </div> </footer> </div> <script type="module">const e=document.getElementById("mobile-menu-button"),t=document.getElementById("mobile-menu");e?.addEventListener("click",()=>{t?.classList.toggle("hidden")});</script> </body> </html>